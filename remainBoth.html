<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SYP Smart | Ø­Ø³Ø§Ø¨ Ø§Ù„Ø²Ø¨ÙˆÙ†</title>

<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">

<style>
:root{
--green:#0f7b4f;
--dark:#111827;
--soft:#f4f7f6;
--gray:#6b7280;
}

*{
box-sizing:border-box;
font-family:'Cairo',sans-serif;
}

body{
margin:0;
min-height:100vh;
background:linear-gradient(
to bottom,
#0f7b4f 0%,
#0f7b4f 25%,
#ffffff 25%,
#ffffff 70%,
#111827 70%,
#111827 100%
);
}

/* HEADER */
.header{
padding:18px;
color:white;
display:flex;
align-items:center;
gap:12px;
}

.logo{
width:46px;height:46px;
border-radius:16px;
background:#fff;
color:#0f7b4f;
display:flex;
align-items:center;
justify-content:center;
font-weight:700;
font-size:18px;
}

/* CARD */
.card{
max-width:420px;
margin:0 auto 24px;
background:white;
border-radius:28px;
padding:22px;
box-shadow:0 20px 45px rgba(0,0,0,.25);
}

/* TITLE */
h2{
margin:0 0 18px;
font-size:18px;
color:#0f7b4f;
text-align:center;
}

/* INPUT */
label{
font-size:14px;
color:#374151;
margin-top:16px;
display:block;
}

input{
width:100%;
padding:16px;
border-radius:18px;
border:1px solid #d1d5db;
font-size:16px;
margin-top:8px;
}

/* BADGE */
.currency-badge{
display:inline-block;
margin-top:6px;
padding:6px 14px;
border-radius:20px;
font-size:13px;
font-weight:600;
}

.new{
background:#dcfce7;
color:#065f46;
}

.old{
background:#e5e7eb;
color:#1f2937;
}

/* BUTTON */
button{
width:100%;
margin-top:14px;
padding:14px;
border:none;
border-radius:18px;
font-size:15px;
background:#0f7b4f;
color:white;
cursor:pointer;
}

/* RESULT */
.result{
margin-top:20px;
background:#ecfdf5;
border:2px solid #0f7b4f;
border-radius:22px;
padding:18px;
text-align:center;
}

.result strong{
font-size:18px;
color:#065f46;
}

.result div{
margin-top:8px;
font-size:15px;
}

/* NOTE */
.note{
margin-top:14px;
font-size:13px;
color:#374151;
background:#f9fafb;
padding:12px;
border-radius:14px;
line-height:1.8;
}

/* HISTORY */
.history{
margin-top:18px;
max-height:160px;
overflow-y:auto;
font-size:13px;
}

.history-item{
padding:8px 0;
border-bottom:1px solid #e5e7eb;
}
</style>
</head>

<body>

<div class="header">
<div class="logo">SY</div>
<div>
<strong>SYP Smart</strong><br>
<small>Ø­Ø³Ø§Ø¨ Ø§Ù„Ø²Ø¨ÙˆÙ†</small>
</div>
</div>

<div class="card">

<h2 id="currencyTitle">ğŸ§¾ Ø­Ø³Ø§Ø¨ Ø§Ù„Ø²Ø¨ÙˆÙ† â€“ Ø§Ù„Ù„ÙŠØ±Ø© Ø§Ù„Ø³ÙˆØ±ÙŠØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©</h2>

<label>ğŸ’¼ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø­Ø³Ø§Ø¨ Ø§Ù„Ø²Ø¨ÙˆÙ†</label>
<input id="total" inputmode="numeric" placeholder="Ø£Ø¯Ø®Ù„ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø­Ø³Ø§Ø¨">
<div id="totalBadge" class="currency-badge new">Ø§Ù„Ù„ÙŠØ±Ø© Ø§Ù„Ø³ÙˆØ±ÙŠØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©</div>

<button onclick="toggleCurrency()">â†” ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„Ø©</button>

<label>ğŸ’µ Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯ÙÙˆØ¹ (Ø§Ù„Ù„ÙŠØ±Ø© Ø§Ù„Ø³ÙˆØ±ÙŠØ© Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©)</label>
<input id="paid" inputmode="numeric" placeholder="Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯ÙÙˆØ¹">
<div class="currency-badge old">Ø§Ù„Ù„ÙŠØ±Ø© Ø§Ù„Ø³ÙˆØ±ÙŠØ© Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©</div>

<button onclick="calculate()">ğŸ“Š Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ</button>

<div class="result" id="resultBox" style="display:none">
<strong>Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ</strong>
<div id="remainNew"></div>
<div id="remainOld"></div>
</div>

<div class="note">
âœ³ Ø§ÙƒØªØ¨ Ø§Ù„Ù…Ø¨Ù„Øº Ø­Ø³Ø¨ Ø§Ù„Ø¹Ù…Ù„Ø© Ø§Ù„Ø¸Ø§Ù‡Ø±Ø© Ø£Ø¹Ù„Ù‰ Ø§Ù„Ø­Ù‚Ù„<br>
âœ³ Ø§Ù„ØªØ­ÙˆÙŠÙ„ ÙŠØªÙ… ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø¨Ø¯ÙˆÙ† Ø£Ø®Ø·Ø§Ø¡<br>
âœ³ ÙŠØªÙ… Ø­ÙØ¸ ÙƒÙ„ Ø¹Ù…Ù„ÙŠØ© ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§
</div>

<div class="history" id="history"></div>

</div>

<script>
let mode="new";
let history=JSON.parse(localStorage.customerHistory||"[]");

// Ø¯Ø§Ù„Ø© ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø£Ø±Ù‚Ø§Ù…
function formatInput(el){
el.addEventListener("input",()=>{
let v=el.value.replace(/\D/g,"");
el.value=v?Number(v).toLocaleString():"";
});
}

formatInput(total);
formatInput(paid);

// ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„Ø©
function toggleCurrency(){
mode = mode==="new"?"old":"new";

document.getElementById("currencyTitle").innerText =
mode==="new"
? "ğŸ§¾ Ø­Ø³Ø§Ø¨ Ø§Ù„Ø²Ø¨ÙˆÙ† â€“ Ø§Ù„Ù„ÙŠØ±Ø© Ø§Ù„Ø³ÙˆØ±ÙŠØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©"
: "ğŸ§¾ Ø­Ø³Ø§Ø¨ Ø§Ù„Ø²Ø¨ÙˆÙ† â€“ Ø§Ù„Ù„ÙŠØ±Ø© Ø§Ù„Ø³ÙˆØ±ÙŠØ© Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©";

const badge=document.getElementById("totalBadge");
badge.innerText =
mode==="new"?"Ø§Ù„Ù„ÙŠØ±Ø© Ø§Ù„Ø³ÙˆØ±ÙŠØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©":"Ø§Ù„Ù„ÙŠØ±Ø© Ø§Ù„Ø³ÙˆØ±ÙŠØ© Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©";
badge.className="currency-badge "+(mode==="new"?"new":"old");
}

// ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù‚ÙŠÙ…
function num(id){
return Number(document.getElementById(id).value.replace(/,/g,""));
}

// Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ
function calculate(){
let totalVal=num("total");
let paidVal=num("paid");
if(!totalVal) return;

// ØªØ­ÙˆÙŠÙ„ Ù„ÙƒÙ„ØªØ§ Ø§Ù„Ø¹Ù…Ù„ØªÙŠÙ†
let totalOld = mode==="new"? totalVal*100 : totalVal;
let remainOld = totalOld - paidVal;
let remainNew = remainOld/100;

// Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ù…Ø¹ "Ø£Ùˆ" Ø¨ÙŠÙ† Ø§Ù„Ø¬Ø¯ÙŠØ¯ ÙˆØ§Ù„Ù‚Ø¯ÙŠÙ…
document.getElementById("remainNew").innerText =
"ğŸ’¶ "+remainNew.toLocaleString()+" Ù„.Ø³ Ø¬Ø¯ÙŠØ¯Ø© Ø£Ùˆ ğŸ’´ "+remainOld.toLocaleString()+" Ù„.Ø³ Ù‚Ø¯ÙŠÙ…Ø©";
document.getElementById("remainOld").innerText = ""; // Ù†ØªØ±Ùƒ Ø§Ù„Ø³Ø·Ø± Ø§Ù„Ø«Ø§Ù†ÙŠ ÙØ§Ø±ØºÙ‹Ø§ Ù„ØªÙˆØ¶ÙŠØ­ Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙÙŠ Ø§Ù„Ø³Ø·Ø± Ø§Ù„Ø£ÙˆÙ„

document.getElementById("resultBox").style.display="block";

// Ø­ÙØ¸ ÙÙŠ Ø§Ù„Ø³Ø¬Ù„
history.unshift(
`Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${totalVal.toLocaleString()} (${mode==="new"?"Ø¬Ø¯ÙŠØ¯Ø©":"Ù‚Ø¯ÙŠÙ…Ø©"}) | Ø§Ù„Ù…Ø¯ÙÙˆØ¹: ${paidVal.toLocaleString()} | Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: ${remainNew.toLocaleString()} Ø£Ùˆ ${remainOld.toLocaleString()}`
);

localStorage.customerHistory=JSON.stringify(history);
renderHistory();
}

// Ø¹Ø±Ø¶ Ø§Ù„Ø³Ø¬Ù„
function renderHistory(){
let h=document.getElementById("history");
h.innerHTML="";
history.forEach(i=>{
let d=document.createElement("div");
d.className="history-item";
d.innerText=i;
h.appendChild(d);
});
}

renderHistory();
</script>

</body>
</html>
